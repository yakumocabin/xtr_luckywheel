<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ä¸“å±å¹¸è¿è½¬ç›˜</title>
<style>
body {
    text-align: center;
    background: linear-gradient(135deg, #ffeef3, #ffd6e0);
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

h1 {
    margin-top: 20px;
    color: #ff6b81;
    font-size: 2.5rem;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 900px;
    width: 100%;
}

.wheel-container {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 30px auto;
}

.wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    transition: transform 4s cubic-bezier(0.2, 0.8, 0.3, 1);
    transform: rotate(0deg);
}

.wheel.spinning {
    transition: transform 4s cubic-bezier(0.2, 0.8, 0.3, 1);
}

.segment {
    position: absolute;
    width: 50%;
    height: 50%;
    transform-origin: 100% 100%;
    left: 0;
    top: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.segment-text {
    transform: rotate(45deg);
    margin-left: 60px;
    margin-bottom: 30px;
    font-size: 16px;
    text-align: center;
    width: 80px;
}

.pointer {
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 60px;
    z-index: 10;
}

.pointer:before {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 30px solid #ff6b81;
    top: 0;
    left: 0;
}

button {
    padding: 18px 40px;
    font-size: 22px;
    background: linear-gradient(to right, #ff6b81, #ff8e53);
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    margin-top: 30px;
    box-shadow: 0 6px 20px rgba(255, 107, 129, 0.4);
    transition: all 0.3s;
    font-weight: bold;
}

button:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(255, 107, 129, 0.6);
}

button:active {
    transform: translateY(1px);
}

button:disabled {
    background: #cccccc;
    cursor: not-allowed;
    box-shadow: none;
}

#result {
    margin-top: 30px;
    font-size: 28px;
    color: #333;
    min-height: 60px;
    padding: 15px 30px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    max-width: 500px;
    width: 90%;
}

.prize-list {
    margin-top: 30px;
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    max-width: 500px;
    width: 90%;
}

.prize-list h3 {
    margin-top: 0;
    color: #ff6b81;
}

.prize-list ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
}

.prize-list li {
    background: #ffeef3;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 16px;
}

.footer {
    margin-top: 40px;
    color: #888;
    font-size: 14px;
}
</style>
</head>

<body>

<div class="container">
    <h1>ç»™ä½ çš„ä¸“å±æƒŠå–œ ğŸ</h1>

    <div class="wheel-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel">
            <!-- æ‰‡åŒºå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <button id="spin-button" onclick="spin()">å¼€å§‹æŠ½å¥–</button>

    <div id="result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æ—‹è½¬</div>

    <div class="prize-list">
        <h3>å¥–å“åˆ—è¡¨</h3>
        <ul id="prize-list-ul">
            <!-- é€šè¿‡JSå¡«å…… -->
        </ul>
    </div>

    <div class="footer">
        æ¯æ¬¡æŠ½å¥–åè½®ç›˜å°†é”å®šï¼Œåˆ·æ–°é¡µé¢å¯é‡ç½®
    </div>
</div>

<script>
let prizes = [
    "å“ˆåŸºç±³",
    "æˆ‘çš„åˆ€ç›¾",
    "å—åŒ—è·¯å¤š",
    "å¤–å¸å·´ä¼¯",
    "å…«å˜é›…é¹¿"
];

let locked = false;
let spinning = false;
let wheel = document.getElementById('wheel');
let spinButton = document.getElementById('spin-button');
let resultDiv = document.getElementById('result');
let prizeListUl = document.getElementById('prize-list-ul');

// åˆå§‹åŒ–è½®ç›˜æ‰‡åŒº
function initWheel() {
    wheel.innerHTML = '';
    let total = prizes.length;
    let anglePer = 360 / total;
    let colors = ['#FF6B81', '#FF8E53', '#FFD166', '#06D6A0', '#118AB2'];

    for (let i = 0; i < total; i++) {
        let segment = document.createElement('div');
        segment.className = 'segment';
        segment.style.transform = `rotate(${i * anglePer}deg)`;
        segment.style.backgroundColor = colors[i % colors.length];

        let text = document.createElement('div');
        text.className = 'segment-text';
        text.textContent = prizes[i];
        segment.appendChild(text);

        wheel.appendChild(segment);
    }

    // å¡«å……å¥–å“åˆ—è¡¨
    prizeListUl.innerHTML = '';
    prizes.forEach(prize => {
        let li = document.createElement('li');
        li.textContent = prize;
        prizeListUl.appendChild(li);
    });
}

// æ—‹è½¬è½®ç›˜
function spin() {
    if (locked) {
        alert("å·²ç»æŠ½è¿‡å•¦ ğŸ˜");
        return;
    }
    if (spinning) return;

    spinning = true;
    spinButton.disabled = true;
    resultDiv.innerHTML = "æ—‹è½¬ä¸­...";

    // éšæœºæ—‹è½¬åœˆæ•°ï¼ˆ4-6åœˆï¼‰
    let rounds = 4 + Math.floor(Math.random() * 4); // 
    let prizeIndex = Math.floor(Math.random() * prizes.length);
    let anglePer = 360 / prizes.length;
    // æ‰‡åŒºä¸­å¿ƒè§’åº¦ï¼ˆä»0åº¦å¼€å§‹é¡ºæ—¶é’ˆï¼‰
    let sectorCenter = prizeIndex * anglePer + anglePer / 2;
    // æœ€ç»ˆè§’åº¦ï¼šåœˆæ•°*360 + ä½¿æ‰‡åŒºä¸­å¿ƒå¯¹å‡†æŒ‡é’ˆï¼ˆ0åº¦ï¼‰æ‰€éœ€çš„è§’åº¦
    // æˆ‘ä»¬å¸Œæœ›æ‰‡åŒºä¸­å¿ƒæ—‹è½¬åä½äº0åº¦ï¼Œå³ (sectorCenter + finalAngle) % 360 = 0
    // æ‰€ä»¥ finalAngle = (360 - sectorCenter) + rounds * 360
    // å®æµ‹å‘ç°æœ‰90Â°çš„åå·®ï¼Œæ”¹æˆ90-sectorcenterã€‚ã€‚ã€‚ã€‚
    let finalAngle = rounds * 360 + (90 - sectorCenter);
    console.log('prizeIndex:', prizeIndex, 'sectorCenter:', sectorCenter, 'finalAngle:', finalAngle, 'mod:', finalAngle % 360);

    // é‡ç½®å½“å‰æ—‹è½¬
    wheel.style.transform = 'rotate(0deg)';
    // å¼ºåˆ¶é‡æ’
    void wheel.offsetWidth;

    // åº”ç”¨æ—‹è½¬
    wheel.style.transform = `rotate(${finalAngle}deg)`;
    wheel.classList.add('spinning');

    // æ—‹è½¬ç»“æŸå
    setTimeout(() => {
        spinning = false;
        wheel.classList.remove('spinning');
        let finalPrize = prizes[prizeIndex];
        resultDiv.innerHTML = `âœ¨ æ­å–œæŠ½åˆ°ï¼š<strong>${finalPrize}</strong> âœ¨`;
        locked = true;
        spinButton.disabled = false;
        spinButton.textContent = "å·²æŠ½å¥–";
    }, 4000);
}

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
window.onload = initWheel;
</script>

</body>
</html>
